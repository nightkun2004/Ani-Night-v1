<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เล่น</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6579807593228261"
        crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/acticle.css">
    <link rel="stylesheet" href="../css/play.css">
    <link rel="stylesheet" href="../css/footer.css">
    <link rel="stylesheet" href="../css/font/font1.css">
    <link rel="stylesheet" href="../css/pages/video_player.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css" />
    <script type="text/javascript" src="/js/index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css"
        integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css"
        integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <script src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
    <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
    <script>
        window.googletag = window.googletag || { cmd: [] };
        googletag.cmd.push(function () {
            googletag.defineSlot('/22745653040/AniNightads', [120, 20], 'div-gpt-ad-1710925870938-0').addService(googletag.companionAds()).addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.pubads().enableVideoAds();
            googletag.companionAds().setRefreshUnfilledSlots(true);
            googletag.enableServices();
        });
    </script>
</head>

<body>
    <div class="fixed inset-x-0 z-20" id="navbar">
        <%- include('../navbar') %>
    </div>
    <section class="playsec mx-auto xl:max-w-7xl pt-[110px]">
        <div class="container-play">
            <section class="section-player">
                <div class="container">
                    <div class="video_player">
                        <video webkit-playsinline playsinline preload="metadata" class="main-video" id="video">
                            <source src="/videos/<%= video.filePath %>.mp4" size="720" type="video/mp4">

                            <% if (video.subthai) { %>
                                <track default label="ซับไทย" kind="subtitles" src="<%= video.subthai %>" srclang="th">
                                <% } else { %>
                                    <track default label="ซับไทย" kind="subtitles" src="../subtitles/mosawoth.vtt"
                                        srclang="th">
                                    <% } %>


                                        <!-- <audio id="audio" src="./audip_th.wav"></audio>

                            <select id="audioSelect">
                                <option value="./audip_th.wav" selected>เสียงพากย์ภาษาไทย</option>
                                <option value="./audip_en.wav">เสียงพากย์ภาษาอังกฤษ</option>
                                <option value="./audip_jp.wav">เสียงพากย์ภาษาญี่ปุ่น</option>
                            </select> -->
                        </video>pt>
                    </div>
                </div>

        </div>
        <div class="mt-8 w-full bg-white px-6 md:px-12 py-4 shadow-md rounded-md relative">
            <h2 style="font-size: 20px; font-weight: bold;">ความคิดเห็น</h2>
        </div>
    </section>
    <div class="info">
        <div class="mt-8 bg-white px-6 md:px-12 py-4 shadow-md rounded-md relative">
            <div class="tages">
                <% if (video && video.tags && video.tags.length> 0) { %>
                    <h2> <%- video.tags.map(tag=> `<a href="/tag/${tag}">${tag}</a>`).join(', ') %></h2>
                    <% } else { %>
                        <h2>Tags: ไม่มีแท็ก</h2>
                        <% } %>
            </div>
            <h2 class="text-1xl mt-2 text-center tracking-wider text-gray-700 mt-4">
                <%= video.name %>
            </h2>
            <div class="description bg-gray-50" style="border-radius: 10px; padding: 20px;">
                <p>
                    <% if(video.description.length <=50) { %>
                        <%= video.description %>
                            <% } else { %>
                                <span class="short-text">
                                    <%= video.description.substring(0, 50) %>
                                </span>
                                <span class="full-text" style="display: none;">
                                    <%= video.description %>
                                </span>
                                <span class="more-btn">ดูเพิ่มเติม</span>
                                <span class="less-btn" style="display: none;">ย่อ</span>
                                <% } %>
                </p>
            </div>
            <div class="flex items-center justify-center mt-4">
                <% if (video && video.createdAt) { %>
                    <p> สร้างเมื่อ : <%= new Date(video.createdAt).toLocaleDateString('en-EN') %>
                    </p>
                    <% } %>
                        <h2 class="pl-[20px]">
                            <p class="views-pc">การดู <%= video.views %> ครั้ง</p>
                        </h2>
            </div>
            <% if (video.author && video.author.id) { %>
                <!-- ส่วนโปรไฟล์ -->
                <a href="/editor/<%= video.author.id.username %>">
                    <div class="flex items-center">
                        <div class="mt-1">
                            <img class="w-[50px] h-[50px] p-1 rounded-full"
                                src="/profiles/<%= video.author.id.profile %>" alt="">
                        </div>
                        <h2 class="pl-[10px]">
                            <%= video.author.id.username %>
                        </h2>
                    </div>
                </a>
                <% } else { %>
                    <p>Author: Unknown</p>

                    <% } %>
        </div>

        <!-- ส่วนคำอธิบาย -->
        <div class="mt-8 bg-white px-6 md:px-12 py-4 shadow-md rounded-md relative">
            <h2 class="text-2xl font-bold font-weight-500 mb-[20px]">นักพากย์ไทยและญี่ปุ่น</h2>
            <ul
                class="flex flex-wrap text-sm font-medium text-center text-gray-500 border-gray-200 dark:border-gray-700 dark:text-gray-400">
                <li class="me-2">
                    <a href="#" aria-current="page"
                        class="inline-block p-4 text-white bg-amber-400 rounded-t-lg active dark:bg-gray-800 dark:text-blue-500">นักพากย์ไทย</a>
                </li>
                <li class="me-2">
                    <a href="#"
                        class="inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300">นักพากย์ญี่ปุ่น</a>
                </li>
            </ul>

            <div class="ct-1">
                <div data-v-0a465567 class="row-card view-character-staff">
                    <div data-v-0a465567 class="character">
                        <a data-v-0a465567 href="" class="cover" style="
                                background-image: url(https://m1r.ai/9/l6s1g.png);"></a>
                        <a data-v-0a465567 href="" class="content">
                            <div data-v-0a465567 class="name">
                                ชื่อ
                            </div>
                        </a>
                    </div>
                    <div data-v-0a465567 class="voice">
                        <a data-v-0a465567 href="" class="cover"
                            style="background-image: url(https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx151970-qFKtRhOaSqa0.jpg);"></a>
                        <a data-v-0a465567 href="">
                            <div data-v-0a465567 class="name">
                                Name Voice
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    </section>
    <%- include('../footer') %>

        <script src="../js/video_player.js"></script>
        <!-- <script src="./js/pages/videoai.js"></script> -->
        <script>
            window.addEventListener('scroll', function () {
                var navbar = document.getElementById('navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('navbar-white-bg');
                } else {
                    navbar.classList.remove('navbar-white-bg');
                }
            });

        </script>
        <script>
            var videoPlayer = document.getElementById('video');
            var adsLoader = new google.ima.AdsLoader(adDisplayContainer);

            // Create ad display container
            var adDisplayContainer = new google.ima.AdDisplayContainer(document.getElementById('adContainer'), videoPlayer);

            // Create ads request
            var adsRequest = new google.ima.AdsRequest();
            adsRequest.adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/22745653040/AniNight-004&description_url=[placeholder]&tfcd=0&npa=0&sz=400x300%7C640x480&ciu_szs=300x250%2C336x280%2C728x90&gdfp_req=1&output=vast&env=vp&unviewed_position_start=1&impl=s&correlator=';

            adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, onAdsManagerLoaded, false);
            adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, onAdError, false);

            function onAdsManagerLoaded(adsManagerLoadedEvent) {
                var adsRenderingSettings = new google.ima.AdsRenderingSettings();
                adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete = true;
                adsManager = adsManagerLoadedEvent.getAdsManager(videoPlayer, adsRenderingSettings);
                adsManager.init(640, 360, google.ima.ViewMode.NORMAL);
                adsManager.start();
            }

            function onAdError(adErrorEvent) {
                console.error('Ad error: ' + adErrorEvent.getError());
                videoPlayer.play(); // Continue video playback if ad fails
            }

            adsLoader.requestAds(adsRequest);
        </script>

        <div id="adContainer"></div>
</body>

</html>