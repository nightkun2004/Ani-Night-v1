<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>จัดการวีดีโอโอ</title>
    <link rel="stylesheet" href="../../css/index.css">
    <link rel="stylesheet" href="../../css/acticle.css">
    <link rel="stylesheet" href="../../css/pages/uploads/video.css">
    <link rel="stylesheet" href="../../css/footer.css">
    <link rel="stylesheet" href="../../css/font/font1.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6579807593228261"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./css/pages/videos.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css" />
    <script type="text/javascript" src="/js/index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css"
        integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css"
        integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <%- include('../../../../navbar') %>
        <section class="mx-auto px-4 xl:max-w-7xl pt-[110px]">
            <h2 class="text-3xl mb-6 border-l-4 border-sky-600 px-5 text-gray-600">จัดการวีดีโอ</h2>
            <nav aria-label="Page navigation example" style="display: flex; justify-content: center;">
                <ul class="flex items-center -space-x-px h-10 text-base">
                    <li>
                        <a href="/<%= usersesstion.url %>/dashboard?tokenlogin=<%= usersesstion.accessToken%>"
                            class="flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-whitee">
                         ย้อนกลับ
                        </a>
                    </li>
                    <li>
                        <a href="/<%= usersesstion.url %>/dashboard/video?tokenlogin=<%= usersesstion.accessToken%>"
                            class="flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-gray-100 border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-whitee">
                         จัดการวีดีโอ
                        </a>
                    </li>
                    <li>
                        <a href="/<%= usersesstion.url %>/dashboard?tokenlogin=<%= usersesstion.accessToken%>"
                            class="flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-whitee">
                            จัดการบทความ
                        </a>
                    </li>
                </ul>
            </nav>
            <!-- <div class="mt-8 bg-white px-6 md:px-12 py-4 shadow-md rounded-md relative">
                <div class="videos_edits">
                    <ul class="videoEdits grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <% if (userData && userData.videos && userData.videos.length> 0) { %>
                            <% userData.videos.forEach(video=> { %>
                                <li class="item rounded-lg border-inherit p-2 bg-gray-50">
                                    <div class="img_edit">
                                        <video controls class="w-[100%] h-[200px]"
                                            src="/videos/<%= video.filePath %>.mp4"></video>
                                    </div>
                                    <div class="text_info">
                                        <h class="p-[10px] mb-[10px] text-2xl" title="<%= video.name %>">
                                            <%= video.name %>
                                        </h>
                                        <div class="btn_edit">
                                            <form action="/edit_acticle" method="POST">
                                                <input type="hidden" name="edit_id" value="<%= video._id %>">
                                                <button type="submit"
                                                    class="btn-deitarticle rounded-lg bg-green-500 w-full mb-[20px] p-2">แก้ไข</button>
                                            </form>
                                            <button class="btnde bg-red-500 p-2 rounded-lg w-full"><a
                                                    class="delete-button" href="/delete/<%= video._id %>"
                                                    onclick="confirmDelete(event)">ลบ</a></button>
                                        </div>
                                    </div>
                                </li>
                                <% }); %>
                                    <% } else { %>
                                        <p style="text-align: center; color: #000;">ยังไม่มีเนื้อหาบทความที่สร้างครับ.
                                        </p>
                                        <% } %>

                    </ul>
                </div>
            </div> -->

        </section>

        <%- include('../../../../footer') %>
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const mainVideos = document.querySelectorAll("video");
                    mainVideos.forEach(video => {
                        let videoUrl = video.src;
                        blobUrl(video, videoUrl);
                    });

                    function blobUrl(video, videoUrl) {
                        let xhr = new XMLHttpRequest();
                        xhr.open("GET", videoUrl);
                        xhr.responseType = "blob";
                        xhr.onload = (e) => {
                            if (xhr.status === 200) {
                                let blob = xhr.response;
                                let url = URL.createObjectURL(blob);
                                video.src = url;
                            } else {
                                console.error('Failed to load video');
                            }
                        };
                        xhr.onerror = () => {
                            console.error('Failed to load video');
                        };
                        xhr.send();
                    }
                });

            </script>
</body>

</html>